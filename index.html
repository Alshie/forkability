<!DOCTYPE html>
<html>
<head>
	<title>Forkability</title>
	<style type="text/css">
		li {
			list-style: none;
			text-indent: 0;
			margin-left:0;
			padding: 0;
		}
	</style>
	<script type="text/javascript">
	function generateUUID() {
		var d = new Date().getTime();
		var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
			var r = (d + Math.random()*16)%16 | 0;
			d = Math.floor(d/16);
			return (c=='x' ? r : (r&0x7|0x8)).toString(16);
		});
		return uuid;
	}
	function getUrlVars()
	{
		var vars = [], hash;
		var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
		for(var i = 0; i < hashes.length; i++)
		{
			hash = hashes[i].split('=');
			vars.push(hash[0]);
			vars[hash[0]] = hash[1];
		}
		return vars;
	}
	</script>
</head>
<body>
	<div class="container">
		<p><a class="sign-in" href="https://github.com/login/oauth/authorize?client_id=9dddfb154feb2d02d35c&amp;state=">Sign in with GitHub</a></p>
		<h2>Recommended Files</h2>
		<ul class="present-files">
		</ul>
		<ul class="missing-files">
		</ul>
		<h2>Warnings</h2>
		<ul class="warnings">
		</ul>
	</div>
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="dist/forkability.edge.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			var urlVars = getUrlVars();
			var forkabilityOpts = {
				user: 'basicallydan',
				repository: 'interfake'
			};

			if (urlVars.access_token) {
				forkabilityOpts.auth = {
					token: urlVars.access_token
				};
			}
			
			$('.sign-in').attr('href', $('.sign-in').attr('href') + generateUUID());
			forkability(forkabilityOpts, function (err, report) {
				report.files.present.forEach(function(thing) {
					$('<li><span class="green">✓</span>' + thing + '</li>').appendTo('.present-files');
				});
				report.files.missing.forEach(function(thing) {
					$('<li><span class="red">✘</span>' + thing + '</li>').appendTo('.missing-files');
				});
				report.warnings.forEach(function (w, i) {
					var warning = $('<li class="warning"><span class="cyan">|</span>' + w.message + '</li>').appendTo('.warnings');
					if (w.details && w.details.url) {
						$('<span class="warning-detail"></span>').appendTo(warning).html('Hello');
						// $('<span class="warning-detail">' +
						// 	'<span class="cyan">' + ((i === report.warnings.length - 1 ? '└' : '├') + '──') + '</span>' +
						// 	w.details.title ? (w.details.title + ':') : '' + ' ' + w.details.url + '</span>').appendTo(warning);
					}
				});
			});
		});
	</script>
</body>
</html>